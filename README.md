# 台股波段健康/多空儀表板 (Taiwan Stock Health Dashboard)

這個專案是一個台股儀表板，用來快速檢查個股的波段多空趨勢與體質。我們從技術面、籌碼面、基本面三個維度切入給出分數，並透過 AI 統整出一份簡短的總結報告。

## 🌟 Demo
> 🔗 **[Vercel Demo URL (即將上線)]()**

## 📸 核心功能
- **Dashboard**: 一眼看出 5 檔自選股的三大面向分數與 AI 解讀。
- **Watchlist**: 自選股清單直接存在瀏覽器的 LocalStorage 裡，不用登入。
- **Reports**: 每日自動產生大盤或個股的文字簡報。

## 🏗️ 系統架構

```mermaid
graph LR
A["Provider<br/>(FinMind 等)"] --> B["Signals<br/>(技術/籌碼/基本)"]
B --> C["Explain<br/>(AI 規則/LLM)"]
C --> D["Next.js API<br/>(/api/stock)"]
D --> E["UI Dashboard<br/>(前端)"]
```

## 🛠 自動測試與診斷

專案裡有寫好的幾支腳本可以當作自我檢測，跑一下就能知道 API 有沒有壞掉、快取有沒有命裡，或是算出來的分數正不正常。像是台積電、鴻海、聯發科算出來的分數不應該都長得一樣：

```bash
npm run selfcheck
```

如果你只擔心營收等基本面 API 壞掉：
```bash
npm run selfcheck:fundamental
```

腳本跑完會在終端機印出詳細分數跟實際拿到的資料筆數，最後還會自動檢查 `flowScore` 和 `fundamentalScore` 的波動區間有沒有達到實務上能用的標準。如果 API 斷線或資料抓不到會直接噴警告。

## 📊 計分邏輯

### 📈 1. 趨勢分數 (Trend Score) - 0~100 分
看目前的技術面強弱：
- **40% 趨勢排列**: 檢查 20MA、60MA、120MA 目前是多頭還是空頭排隊。
- **20% RSI 動能**: RSI(14) 區間動能，大於 50 偏強，大於 70 留意超買風險。
- **20% MACD 柱狀**: 趨勢加速指標，紅柱會加分。
- **20% 波段報酬**: 最近 60 天內這檔股票幫你賺（或賠）了多少。

### 💰 2. 籌碼分數 (Flow Score) - 0~100 分
追蹤法人的大錢跟散戶動向：
- **外資買賣 (+/-25)**: 近 5 天與近 20 天外資淨買賣超狀況。
- **投信買賣 (+/-25)**: 近 5 天與近 20 天投信淨買賣超狀況。
- **融資餘額 (+/-10)**: 看看散戶有沒有過度熱情，如果近 20 天融資暴增，通常會直接扣分。

### 🏭 3. 基本面分數 (Fundamental Score) - 0~100 分
找尋有沒有實質的獲利數字在支撐股價：
- **YoY 平均**: 最近三個月份的單月營收年增率大約多少。
- **YoY 趨勢**: 營收成長是不是這幾個月持續在放大。

### 📰 4. 催化劑與新聞 (News Catalyst) - -100~100 分
- 透過 AI 分析近 7 天的新聞事件，標記出利多與利空消息。
- 判斷目前的市場關注焦點，快速總結成催化劑分數。

### ⚡ 5. 其他獨家指標
除了三大面向，我們還加上這些模組幫助決策：
- **波動敏感度 (Volatility)**: 偵測這幾天有沒有假突破或是被急拉急殺的機會。
- **策略建議 (Strategy)**: 定義好觸發條件和失效條件的具體操作建議，例如波段等待、短線偏多。
- **機率預測 (Probability)**: 基於過去歷史統計，推算未來 1/3/5 天可能上漲的校準機率與回檔風險。

---

## 🚀 本地開發與啟動

### 1. 取得 API Key
- 前往 [FinMind 官網](https://finmindtrade.com/) 註冊，申請一組免費的 **API Token**。

### 2. 環境變數設定
把範本檔案複製一份出來改：
```bash
cp .env.example .env
```
編輯 `.env`，貼上你的 Token：
```env
FINMIND_API_TOKEN=你的_FinMind_Token
```
（如果是要在本地跑前面的測試腳本，建議在 `.env.local` 裡也設定同樣的值。）

### 3. 安裝與執行
```bash
npm install
npm run dev
```
打開 [http://localhost:3000](http://localhost:3000) 就能看到結果。

## 部署提醒
如果要部署到 Vercel 上：
1. 記得去 Vercel 的專案設定把 `FINMIND_API_TOKEN` 補上去。
2. 部署上去後，可以直接用瀏覽器打 `/api/health/news?symbol=2330` 這個路由，看看有沒有回傳 `env_has_finmind_token: true` 還有 `data_count > 0`，順便確定環境變數沒漏掉。

---

## ⚠️ 免責聲明
> 此為開源專題展示 (Demo Project)，並非投資建議。\n> 上面的分數與訊號都是基於固定規則和歷史回測計算的結果，實際市場瞬息萬變。盈虧自負，下單前請動腦。
